

## 1. アプリケーション概要

このアプリケーションは、Googleカレンダーの予定情報をもとに日報を自動生成し、指定したSlackチャンネルへ投稿するPythonプログラムです。Slack投稿を主軸とし、日報作成・共有の手間を大幅に削減し、業務効率化と情報共有の迅速化を実現します。


## 2. 主な機能

### 2.1. Googleカレンダー連携
* **Google API認証**: OAuth 2.0によるGoogleカレンダーAPI認証。初回実行時に認証フローを完了。
* **予定情報取得**: 指定日付（デフォルトは当日）の予定をGoogleカレンダーから取得。
* **イベント詳細抽出**: 予定のタイトル、色、開始・終了時刻、説明文などを抽出。

### 2.2. 日報生成
* **Slack投稿用テンプレート**: Slack投稿に最適化した日報テンプレートを用意。日付、予定タイトル、時間、説明文、所要時間などを自動整形。
* **所要時間自動計算**: 予定の開始・終了時刻から各タスクの所要時間を自動算出し、日報に記載。
* **未記録時間の確認**: 予定が入っていない時間帯については、SlackのDMでユーザーに確認・追記依頼を自動送信。

### 2.3. Slack連携・出力
* **Slackチャンネル投稿**: 生成した日報を指定したSlackチャンネルへ自動投稿。
* **DMによるプレビュー・確認**: 投稿前に日報内容や未記録時間の確認をSlack DMで通知。
* **（補足）ファイル出力**: 必要に応じてMarkdownやテキストファイルとしても出力可能。

---


## 3. 非機能要件

### 3.1. 動作環境
* **言語**: Python 3.8以上
* **主要ライブラリ**: `google-api-python-client`, `google-auth-httplib2`, `google-auth-oauthlib`, `slack-sdk` など（仮想環境を用いる）
* **クラウド実行**: AWS Lambda上で動作し、EventBridgeによるスケジュール実行・自動投稿に対応すること。

### 3.2. セキュリティ
* **認証情報管理**: Google API・Slack APIの認証情報は環境変数や安全なストレージで管理し、ソースコードに直書きしない。
* **プライバシー配慮**: 取得した予定情報は日報生成・Slack投稿以外の目的で利用しない。

### 3.3. ユーザビリティ
* **コマンドライン引数**: 日付、SlackチャンネルID、テンプレート指定、ファイル出力有無などを指定可能。
* **ヘルプ表示**: コマンドライン引数の使い方を説明するヘルプメッセージを実装。

---


## 4. 開発・テスト項目

### 4.1. 開発項目
* GoogleカレンダーAPI連携モジュール
* Slack API連携モジュール（チャンネル投稿・DM送信）
* 日報テンプレート定義・テンプレートエンジン
* コマンドライン引数解析（`argparse`等）
* Lambdaハンドラ実装・AWS EventBridgeスケジュール連携
* エラーハンドリング（API認証失敗、ネットワークエラー、Slack投稿失敗等）

### 4.2. テスト項目
* **単体テスト**: 各モジュール（API連携、日報生成、Slack投稿）が正しく動作するか
* **結合テスト**: Googleカレンダーからデータ取得→日報生成→Slack投稿まで一連の流れを検証
* **例外テスト**: 無効な引数・認証情報・SlackチャンネルID等でのエラー時の挙動確認

---

## 5. 補足・今後の拡張案

* **テンプレートカスタマイズ**: ユーザー独自テンプレートの定義・切替
* **複数出力先対応**: Slack以外（メール、Teams等）への自動送信
* **Slackワークフロー連携**: 承認フローや自動リマインダーとの連携
* **Lambda+EventBridge拡張**: 複数ユーザー・複数チャンネルへの自動投稿や、柔軟なスケジュール設定への拡張
* **フィルタリング**: 特定のキーワードやタグを含む予定のみを日報に含める機能。